/*=====================================================================================*/
/**
 * hama_dbg_trace.cpp
 * author : puch
 * date : Oct 22 2015
 *
 * description : Any comments
 *
 */
/*=====================================================================================*/

/*=====================================================================================*
 * Project Includes
 *=====================================================================================*/
#include "dbg_log.h"
/*=====================================================================================*
 * Std Includes
 *=====================================================================================*/
#include <stdarg.h>
/*=====================================================================================* 
 * Local X-Macros
 *=====================================================================================*/

/*=====================================================================================* 
 * Local Define Macros
 *=====================================================================================*/
#define FID_Dbg_Struct(fid, default_lvl, desc) {fid, default_lvl, 0xFFU},
/*=====================================================================================* 
 * Local Type Definitions
 *=====================================================================================*/
typedef struct Dbg_Info
{
   Dbg_Feat_Id_T fid;
   Dbg_Verbose_Lvl_T lvl;
   uint8_t file_id;
}Dbg_Info_T;
/*=====================================================================================* 
 * Local Object Definitions
 *=====================================================================================*/
static Dbg_Info_T Dbg_Info[] =
{
   DBG_FID_LIST(FID_Dbg_Struct)
};

/*=====================================================================================* 
 * Exported Object Definitions
 *=====================================================================================*/

/*=====================================================================================* 
 * Local Function Prototypes
 *=====================================================================================*/

/*=====================================================================================* 
 * Local Inline-Function Like Macros
 *=====================================================================================*/

/*=====================================================================================* 
 * Local Function Definitions
 *=====================================================================================*/
int Dbg_Info_LT(void const * a, void const * b)
{
   Dbg_Feat_Id_T const * fa = (Dbg_Feat_Id_T const *)a;
   Dbg_Feat_Id_T const * fb = (Dbg_Feat_Id_T const *)b;
   return (*fa - *fb);
}
/*=====================================================================================* 
 * Exported Function Definitions
 *=====================================================================================*/
void Dbg_Log_Config(Dbg_Feat_Id_T const fid, uint8_t const file_id)
{
   Dbg_Info_T * const found_dbg_info = bsearch(&fid, Dbg_Info, Num_Elems(Dbg_Info),
         sizeof(*Dbg_Info), Dbg_Info_LT);
   Isnt_Nullptr(found_dbg_info, );
   found_dbg_info->file_id = file_id;
}

void Dbg_Log(Dbg_Feat_Id_T const fid, Dbg_Verbose_Lvl_T const info, char const * filename, int const line,
      char const * fmt, ...)
{
   va_list args;
   va_start(args, fmt);
   printf("%d : %s:%d - ", fid, filename, line);
   vprintf(fmt, args);
   printf("\n");
   va_end(args);
}
/*=====================================================================================* 
 * hama_dbg_trace.cpp
 *=====================================================================================*
 * Log History
 *
 *=====================================================================================*/
